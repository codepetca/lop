# Lop - Multiplayer Voting Game

A real-time multiplayer voting game built with SvelteKit and PartyKit. Create polls with fun questions and watch as players vote in real-time!

## Features

- ðŸŽ² **Random Questions** - Server-generated polls from a curated question bank
- âš¡ **Real-time Updates** - Live vote counting via WebSocket connections
- ðŸŽ® **Multiplayer** - Share poll IDs for friends to join instantly
- ðŸ“Š **Active Rooms** - Browse and join ongoing polls
- ðŸš€ **Fast & Simple** - No login required, jump right in

## Tech Stack

- **Frontend**: SvelteKit + Svelte 5 (with runes)
- **Backend**: PartyKit (WebSocket server)
- **Validation**: Zod schemas
- **Styling**: Vanilla CSS
- **Deployment**: Netlify (frontend) + PartyKit (backend)

## Getting Started

### Prerequisites

- Node.js 18+
- npm or pnpm

### Installation

1. Clone the repository
```bash
git clone https://github.com/yourusername/lop.git
cd lop
```

2. Install dependencies
```bash
npm install
```

3. Copy environment variables
```bash
cp .env.example .env
```

4. Start development servers
```bash
npm run dev
```

This starts both the SvelteKit frontend (http://localhost:5173) and PartyKit backend (http://localhost:1999).

## Development

### Available Scripts

```bash
npm run dev              # Run both frontend and backend
npm run dev:sveltekit    # Frontend only
npm run dev:party        # Backend only
npm run build           # Build for production
npm run preview         # Preview production build
npm run check           # TypeScript checking
npm run lint            # Check code formatting
npm run format          # Auto-format code
```

### Project Structure

```
src/                    # SvelteKit frontend
â”œâ”€â”€ routes/             # Pages and server endpoints
â”œâ”€â”€ lib/                # Shared utilities and types
â””â”€â”€ app.html            # HTML template

party/                  # PartyKit backend
â”œâ”€â”€ lobby.ts            # Main server (room registry)
â”œâ”€â”€ poll.ts             # Poll server (voting logic)
â”œâ”€â”€ handlers.ts         # Business logic
â”œâ”€â”€ questions.ts        # Question bank
â””â”€â”€ utils.ts            # Helper functions

shared/schemas/         # Zod validation schemas
â”œâ”€â”€ poll.ts             # Poll data structures
â”œâ”€â”€ message.ts          # WebSocket messages
â””â”€â”€ api.ts              # HTTP requests/responses
```

## Deployment

### Frontend (Netlify)

```bash
npm run build
# Deploy the 'build' directory to Netlify
```

### Backend (PartyKit)

```bash
npm run party:deploy
```

## Environment Variables

See `.env.example` for required variables:
- `PARTYKIT_URL` - Backend HTTP endpoint
- `PUBLIC_PARTYKIT_HOST` - WebSocket host for frontend

## Contributing

Pull requests are welcome! Please ensure:
- Code passes TypeScript checks (`npm run check`)
- Code is formatted (`npm run format`)
- Follow existing patterns for consistency

## License

MIT